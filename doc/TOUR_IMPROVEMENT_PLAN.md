# QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ« - ãƒ„ã‚¢ãƒ¼æ©Ÿèƒ½æ”¹å–„è¨ˆç”»

## ğŸ“‹ ç¾åœ¨ã®å®Ÿè£…è©•ä¾¡

### âœ… æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹æ©Ÿèƒ½
- **åŸºæœ¬çš„ãªãƒ„ã‚¢ãƒ¼ãƒ•ãƒ­ãƒ¼**: é–‹å§‹â†’ã‚¹ãƒ†ãƒƒãƒ—é·ç§»â†’çµ‚äº†ãŒæ­£å¸¸ã«å‹•ä½œ
- **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒã‚¤ãƒ©ã‚¤ãƒˆ**: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¦ç´ ã®é’ã„ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒé©åˆ‡ã«è¡¨ç¤º
- **ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤º**: ã‚¹ãƒ†ãƒƒãƒ—ã‚¿ã‚¤ãƒˆãƒ«ãƒ»å†…å®¹ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒæ­£å¸¸è¡¨ç¤º
- **positionèª¿æ•´**: ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå¢ƒç•Œã‚’è€ƒæ…®ã—ãŸè‡ªå‹•ä½ç½®èª¿æ•´
- **è‡ªå‹•ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: CollapsibleSectionã®å±•é–‹ãŒé©åˆ‡ã«å®Ÿè¡Œ
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: ç•°ãªã‚‹ç”»é¢ã‚µã‚¤ã‚ºã§ã®é©å¿œ

### ğŸ¯ ãƒ†ã‚¹ãƒˆçµæœã‹ã‚‰è¦‹ãˆãŸå¼·ã¿
1. **ç›´æ„Ÿçš„ãªUX**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿·ã‚ãšãƒ„ã‚¢ãƒ¼ã‚’é€²ã‚ã‚‰ã‚Œã‚‹
2. **è¦–è¦šçš„èª˜å°**: ãƒã‚¤ãƒ©ã‚¤ãƒˆã¨ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§æ˜ç¢ºãªèª˜å°
3. **æŸ”è»Ÿæ€§**: è¤‡æ•°ã®positionè¨­å®šã¨è‡ªå‹•èª¿æ•´
4. **ä¸­æ–­å¯èƒ½**: ã‚¹ã‚­ãƒƒãƒ—æ©Ÿèƒ½ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªç”±åº¦ã‚’ç¢ºä¿

## ğŸ”§ æ”¹å–„ãŒå¿…è¦ãªé ˜åŸŸ

### 1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– ğŸš€
**ç¾åœ¨ã®å•é¡Œ:**
- ãƒªã‚µã‚¤ã‚ºãƒ»ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®é »ç¹ãªå†è¨ˆç®—
- ä¸è¦ãªDOMæ“ä½œ

**æ”¹å–„ç­–:**
```typescript
// ãƒ‡ãƒã‚¦ãƒ³ã‚¹æ©Ÿèƒ½ä»˜ãpositionæ›´æ–°
const debouncedUpdatePosition = useMemo(
  () => debounce(updatePosition, 100),
  [updatePosition]
);

// IntersectionObserver ã«ã‚ˆã‚‹å¯è¦–æ€§ç›£è¦–
const useVisibilityObserver = (targetRef: RefObject<Element>) => {
  const [isVisible, setIsVisible] = useState(false);
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => setIsVisible(entry.isIntersecting),
      { threshold: 0.1 }
    );
    
    if (targetRef.current) observer.observe(targetRef.current);
    return () => observer.disconnect();
  }, [targetRef]);
  
  return isVisible;
};
```

### 2. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¼·åŒ– â™¿
**ç¾åœ¨ã®å•é¡Œ:**
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®ã‚µãƒãƒ¼ãƒˆä¸è¶³
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã¸ã®é…æ…®ä¸è¶³

**æ”¹å–„ç­–:**
```typescript
// ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    switch (e.key) {
      case 'Escape':
        onClose();
        break;
      case 'ArrowRight':
      case ' ':
        onNext();
        break;
      case 'ArrowLeft':
        onPrev();
        break;
    }
  };
  
  document.addEventListener('keydown', handleKeyDown);
  return () => document.removeEventListener('keydown', handleKeyDown);
}, [onNext, onPrev, onClose]);

// ARIAå±æ€§ã®è¿½åŠ 
<div
  role="dialog"
  aria-labelledby="tour-title"
  aria-describedby="tour-content"
  aria-live="polite"
>
```

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ– ğŸ›¡ï¸
**ç¾åœ¨ã®å•é¡Œ:**
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®å‡¦ç†ãŒä¸ååˆ†
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶æ™‚ã®è€ƒæ…®ä¸è¶³

**æ”¹å–„ç­–:**
```typescript
// ãƒ­ãƒã‚¹ãƒˆãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆæ¤œç´¢
const findTargetElement = useCallback(
  (selector: string, retries = 3): Promise<Element | null> => {
    return new Promise((resolve) => {
      const attempt = (remaining: number) => {
        const element = document.querySelector(selector);
        if (element || remaining === 0) {
          resolve(element);
        } else {
          setTimeout(() => attempt(remaining - 1), 100);
        }
      };
      attempt(retries);
    });
  },
  []
);
```

### 4. ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ ğŸ¨
**ç¾åœ¨ã®å•é¡Œ:**
- ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«
- ãƒ†ãƒ¼ãƒå¯¾å¿œä¸è¶³

**æ”¹å–„ç­–:**
```typescript
interface TourTheme {
  highlight: {
    borderColor: string;
    backgroundColor: string;
    borderWidth: number;
    borderRadius: number;
  };
  tooltip: {
    backgroundColor: string;
    textColor: string;
    borderRadius: number;
    shadow: string;
  };
  arrow: {
    size: number;
    color: string;
  };
}

const useTourTheme = (customTheme?: Partial<TourTheme>) => {
  return useMemo(() => ({
    ...defaultTourTheme,
    ...customTheme,
  }), [customTheme]);
};
```

### 5. çŠ¶æ…‹ç®¡ç†ã®æ”¹å–„ ğŸ“Š
**ç¾åœ¨ã®å•é¡Œ:**
- Zustandã‚¹ãƒˆã‚¢ã¨å¤ã„hookã®é‡è¤‡
- çŠ¶æ…‹ã®ä¸€è²«æ€§å•é¡Œ

**æ”¹å–„ç­–:**
```typescript
// çµ±ä¸€ã•ã‚ŒãŸãƒ„ã‚¢ãƒ¼çŠ¶æ…‹ç®¡ç†
interface TourState {
  isActive: boolean;
  currentStep: number;
  isLoading: boolean;
  error: string | null;
  progress: {
    completed: number[];
    skipped: number[];
  };
  settings: {
    autoProgress: boolean;
    showProgress: boolean;
    allowSkip: boolean;
  };
}
```

## ğŸ¯ å„ªå…ˆåº¦ä»˜ãå®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: ç·Šæ€¥ä¿®æ­£ (1-2æ—¥) ğŸ”¥
1. **é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç†**
   - `useTour.ts` ã®å‰Šé™¤ã¾ãŸã¯çµ±åˆ
   - ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ•´ç†

2. **åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¦ç´ æœªç™ºè¦‹æ™‚ã®å¯¾å‡¦
   - console.errorã§ã®ãƒ‡ãƒãƒƒã‚°æƒ…å ±å‡ºåŠ›

### Phase 2: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ (3-5æ—¥) âš¡
1. **ãƒ‡ãƒã‚¦ãƒ³ã‚¹å®Ÿè£…**
   - ãƒªã‚µã‚¤ã‚ºãƒ»ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã®æœ€é©åŒ–
   - ä½ç½®è¨ˆç®—ã®åŠ¹ç‡åŒ–

2. **ãƒ¡ãƒ¢åŒ–ã®è¿½åŠ **
   - é‡ã„è¨ˆç®—å‡¦ç†ã®ãƒ¡ãƒ¢åŒ–
   - ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢

### Phase 3: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ (1é€±é–“) â™¿
1. **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã‚µãƒãƒ¼ãƒˆ**
   - çŸ¢å°ã‚­ãƒ¼ãƒ»Escapeãƒ»ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã®å¯¾å¿œ
   - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã®æ”¹å–„

2. **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ**
   - ARIAå±æ€§ã®è¿½åŠ 
   - aria-live ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¤‰æ›´é€šçŸ¥

### Phase 4: æ©Ÿèƒ½æ‹¡å¼µ (1-2é€±é–“) ğŸš€
1. **ãƒ†ãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ **
   - ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼å¯¾å¿œ
   - ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

2. **é«˜åº¦ãªæ©Ÿèƒ½**
   - ãƒ„ã‚¢ãƒ¼é€²è¡ŒçŠ¶æ³ã®ä¿å­˜
   - æ¡ä»¶åˆ†å²ãƒ„ã‚¢ãƒ¼
   - ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```typescript
// å„ªå…ˆåº¦ã®é«˜ã„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
describe('TourStep ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹', () => {
  it('ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¦ç´ ãŒå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹å ´åˆ', async () => {
    // é…å»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  });
  
  it('ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã®ä½ç½®èª¿æ•´', () => {
    // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã®ãƒ†ã‚¹ãƒˆ
  });
  
  it('ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®è¿½å¾“', () => {
    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œã®ãƒ†ã‚¹ãƒˆ
  });
});
```

### çµ±åˆãƒ†ã‚¹ãƒˆ
```typescript
describe('ãƒ„ã‚¢ãƒ¼å…¨ä½“ãƒ•ãƒ­ãƒ¼', () => {
  it('6ã‚¹ãƒ†ãƒƒãƒ—å®Œèµ°', async () => {
    // å…¨ã‚¹ãƒ†ãƒƒãƒ—ã®è‡ªå‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
  });
  
  it('é€”ä¸­ã‚¹ã‚­ãƒƒãƒ—ã‹ã‚‰ã®å†é–‹', async () => {
    // çŠ¶æ…‹ç®¡ç†ã®ãƒ†ã‚¹ãƒˆ
  });
});
```

### E2Eãƒ†ã‚¹ãƒˆ
```typescript
// Playwright ã§ã®ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
test('æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ„ã‚¢ãƒ¼ä½“é¨“', async ({ page }) => {
  // å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
});
```

## ğŸ“ˆ æˆåŠŸæŒ‡æ¨™

### å®šé‡çš„æŒ‡æ¨™
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: FPS 60ç¶­æŒã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 10MB
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: WCAG 2.1 AAæº–æ‹ ç‡ 100%
- **ä¿¡é ¼æ€§**: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ < 0.1%

### å®šæ€§çš„æŒ‡æ¨™
- **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£**: ç›´æ„Ÿçš„ãªæ“ä½œæ„Ÿ
- **å­¦ç¿’åŠ¹æœ**: æ©Ÿèƒ½ç†è§£åº¦ã®å‘ä¸Š
- **é›¢è„±ç‡**: ãƒ„ã‚¢ãƒ¼å®Œèµ°ç‡ > 80%

## ğŸ› ï¸ å®Ÿè£…å„ªå…ˆé †ä½

1. **ğŸ”´ High**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
2. **ğŸŸ¡ Medium**: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã€ãƒ†ã‚¹ãƒˆè¿½åŠ 
3. **ğŸŸ¢ Low**: ãƒ†ãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ ã€é«˜åº¦ãªæ©Ÿèƒ½

ã“ã®è¨ˆç”»ã«åŸºã¥ãã€æ®µéšçš„ã«æ”¹å–„ã‚’é€²ã‚ã‚‹ã“ã¨ã§ã€ç¾åœ¨ã®è‰¯å¥½ãªåŸºç›¤ã‚’ä¿ã¡ãªãŒã‚‰ã€ã‚ˆã‚Šå …ç‰¢ã§ä½¿ã„ã‚„ã™ã„ãƒ„ã‚¢ãƒ¼æ©Ÿèƒ½ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚
